# コラム
このチャプターではちょっとした小ネタを紹介します。

## strict aliasing rule
C/C++言語には、strict aliasing ruleと言われるルールが存在します。
そのルールは、**ミュータブルなオブジェクトに対して変更を加えた時、どのような場合にその変更が別の変数に影響を与えないと、安全に仮定できるか**を定めた規則です。具体的に述べると、**どのような場合に二つのオブジェクトが同じメモリ位置を参照するかもしれないと仮定すべきか**を定めたルールです。

まず、**aliasing**とはなんでしょうか。以下は二つの変数が**aliasing**であると言える例です。
```cpp
int i=0;
int* ptr=&i;
```
「7.1.2 ポインターの基本」でも述べた通り、ポインタ`ptr`に対して何か変更操作を行なったその後に変数`i`から値を読み取ると、その`ptr`に対する操作に依存して当然`i`から読み取る値も変動するはずです。何故なら`i`と`ptr`の示すメモリ位置は同一だからです。このような同一のメモリ位置を2つ以上のlvalueが示す事を**aliasing**と言います。
以下に更に例を示します。
```cpp
int a;
void f(int& b,int& c);
f(a,a);
```
`f`の両方の引数に`a`を指定しています。この時、`f`内では`b`と`c`は、同一のメモリ位置を示すため**aliasing**となります。

この決まりは主に、コンパイラ製作者がコードをよりよく最適化するための規則です。これは標準規格で定められた規則ですから極力守られるべきです。