# 第 6 章 関数、制御区域、名前空間

本章では、関数と制御区域、名前空間の概念について説明します。関数はC++言語の基本的な言語概念でありC++のプログラムは関数の集合であるとも言えます。
この章では以下のような流れで説明していきます。

1. 関数の概念
    * 記述法
    * 呼び出し
    * inline関数
    * 動的再帰
2. グローバルスコープとローカルスコープ
3. namespace
    * ADL

## 6.1 関数
まず始めに文法を述べてしまいましょう。関数の文法は以下のようになっています。
```cpp
キーワード 戻り値の型 関数名(仮引数名...)キーワード{ 関数の内容 }
```
実際に使ってみましょう。

```cpp
#include<iostream>
int func(){return 42;}
int main()
{
    int a=func();
    std::cout << a << std::endl;
}
```
実行結果は以下となります。

```cpp
42
```
まず、
```cpp
int func(){return 42;}
```
で、文法のどこがどこにに対応しているのか説明します。
まずキーワードですが、これは無しです。キーワードについてはまた再度説明する内容となるのですが、必要でない場合省く事ができます。
戻り値の型というのは`int`の部分です。関数の内容で`return 42;`として`42`を返しています。`42`は整数値のため、戻り値の型の指定は`int`が良いでしょう。
関数名というのは`func`の部分です。この場合、「`int`型の値を戻す関数名func」という意味になります。関数名には「2.2.7 識別子へ名付けてはならない名前」にて扱った名前以外は何でも付ける事ができます。
次に仮引数名ですが、この場合は無しです。仮引数名は必要なければこのように省略することができます。
そして再度キーワードですが、これも今回は指定していません。
最後に関数の内容ですが、先ほども述べた通り`return 42;`の部分となります。
...と一気に述べてしまいましたが、大丈夫です。一つずつ説明していきます。まず、return文について触れておきます。

### 6.1.1 return文
return文は関数からの戻り値を指定する文です。文法は以下のようになります。
```cpp
return リターンする値、変数/オブジェクト;
```
例えば先ほどのfunc関数では`return`文に`42`という値を指定していました。
```cpp
int func(){return 42;}
```
変数を指定することもできます。
```cpp
int func()
{
    int a=42;
    return a;
}
```
この場合、aがコピー/ムーブされて関数の呼び出し元へ値が返されます。返される値はaは42として初期化していますので、42ですね。コピー/ムーブの概念については、また後ほどに説明します。
ところで、例えばこのような記述であった場合、実行結果はどのようになるでしょうか。
```cpp
#include<iostream>
int func(){return 42.5;}
int main()
{
    std::cout<<func()<<std::endl;
}
```
コンパイラによっては警告を出力してくれるかもしれません。実行結果は以下になります。
```cpp
42
```
`42.5`を戻すと記述したはずなのに、出力結果は`42`となっていますね。これは、2.2.4で述べたのと同じように、浮動小数点数値を`int`で返しているため、小数点以下が切り捨てられるためです。では、以下のようにするとどうなるでしょうか。
```cpp
#include<iostream>
char func(){return 65;}
int main()
{
    std::cout<<func()<<std::endl;
}
```
実行結果は以下となります。
```cpp
A
```
`65`を返すとしているのに、`A`と出力されました。これは先ほどと同様、`char`型で返すとしているために行われる暗黙の変換がされているためです。`char`型で65は、丁度文字`A`に該当する数値のため、このように出力されるのです。

### 6.1.2 引数
先ほど述べた関数`func`には引数がなしであると述べました。
```cpp
int func(){return 42;}
```
関数にはただただ内容を実行するだけでなく、値を渡したりする事ができるのです。では、この関数に対して例えば整数値を渡してみる事としましょう。
```cpp
int func(int x){return x;}
```
これを使って見ます。
```cpp
#include<iostream>
int func(int x){return x;}
int main()
{
    std::cout<<func(42)<<std::endl;
}
```
実行結果は以下となります。
```cpp
42
```
`func`に`int x`として仮引数名を指定しました。このように記述する事で、int型を受け取る関数として宣言/定義することができます。この関数を呼び出すためには、`func(値/変数/オブジェクト)`と記述します。今回は`func(42)`としていますので`func`関数には`42`が渡ります。その値が仮引数である`x`に渡りそれをそのまま`return`によって返していますので、出力結果は`42`となります。引数を受け取れる関数を使えれば、例えばこのような事ができます。
```cpp
#include<iostream>
int plus(int x,int y){return x+y;}
int main()
{
    std::cout<<plus(10,10)<<std::endl;
}
```
出力結果は以下となります。
```cpp
20
```
引数として渡された`x`と`y`が、`+`演算子によって加算処理が行われます。関数`plus`の第一引数`x`に指定した値は`10`、第二引数`y`に指定した値も`10`ですので、`x+y`では`20`という演算結果が得られます。それを返し、その結果をそのまま出力しろとしているので`20`が出力されます。