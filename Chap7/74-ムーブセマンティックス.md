## 7.4 ムーブセマンティックス

これまでに、コピー、アドレス/参照など、様々な方法でデータに対する操作を行ってきましたが、それに加えてもう一つ、ムーブという概念について説明します。ムーブの概要を理解したら、その仕組みを理解するため`glvalue`と`rvalue`、そしてそれぞれが内包している細かい概念を説明していきます。

### 7.4.1 ムーブの概念とその利用

### 7.4.2 用語とムーブセマンティックスの種明かし

#### glvalue
`glvalue`とは、generalized lvalueの略です。この概念は以下に説明する概念を内包した総合的な`lvalue`の概念と言えます。

##### lvalue
そもそも、`lvalue`をまだ説明していませんでした。
`lvalue`とは`locator value`の略です。
```cpp
// 変数iが宣言されているとする...

i = 42;
// iは式のうちiの値を格納した場所に対して名付けられた識別子名。
// locator(場所) valueを略してlvalue
```
この場合、`i`が`lvalue`です。
`i`は`i`の値を格納した場所に対して名付けられた識別子名です。よって`i`は`locator value`と言えます。`lvalue`の定義は以上です。至ってシンプルですね。

しばしば、`lvalue`は`left value`の略であるとされる事があります。
```cpp
// 変数iが宣言されているとする...

i = 42;
// iは式のうち左にある値。
// left(左) valueを略してlvalue
```
しかし、これは現代的なセマンティックを考えると、適切な言い方とは言えません。何故ならば`left value`というワードは、かつてムーブという概念がなかった時、単に「左の」値、「右の」値という単純な区分をしていた時代背景に起因しています。よって、より現代的な捉え方として適切な用語は、`left value`ではなく、`locator value`であると言えるのです。そもそも、`lvalue`であっても右に来る事は当然ながらありますしね。
```cpp
int i = 0;
int a = i; // iはlvalue
```

また、`lvalue`は日本語に訳した時、主に「左辺値」と呼ばれる事があります。しかし、その意味合いとしては`left value`的なニュアンスを含んでいる事になるため、上記の理由から現代的な`lvalue`に対する日本語の呼称として、「左辺値」というワードを用いる事は、厳密に精査するとあまり適切な翻訳とは言えません。

##### xvalue
`xvalue`はeXpiring valueの略です。意味合いとしては死にかけ(expiring)の値といったところでしょうか。まずどういう事かを理解するために、`std::move`/ムーブ操作の種明かしをする事とします。実は`std::move`/ムーブ操作は、単なるrvalue referenceへのキャストだったのです。以下のように記述する事で実はオブジェクトをムーブする事(std::moveを使うのと同じ事)ができます。
```cpp
int i=0; // iはlvalue。
int a=static_cast<int&&>(i); // rvalue referenceへのキャスト(ムーブ)。
```
この時、`i`はムーブされます。ムーブを行うという事は、ムーブされた元のオブジェクトは未定義となるのですから、それはもはや死んだ(破棄された)も同然ですね。このように、`lvalue`でありながら直ぐ破棄されると分かるような余命宣言をされているようなオブジェクトは`xvalue`にとされます。


#### rvalue


### 7.4.4 相関図
以上の説明から、主に`glvalue`、`rvalue`らの相関図は以下のように捉える事が出来ます。
![](/assets/value.jpeg)